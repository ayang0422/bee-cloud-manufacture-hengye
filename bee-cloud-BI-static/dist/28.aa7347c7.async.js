(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"+OVP":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a("+L6B");var r=l(a("2/Rp"));a("5NDa");var d=l(a("5rEg"));a("miYZ");var o=l(a("tsqr")),u=l(a("2Taf")),s=l(a("vZ4D")),i=l(a("l4Ni")),c=l(a("ujKo")),f=l(a("MhPg"));a("y8nQ");var m,p,_,h,g=l(a("Vl3Y")),v=n(a("q1tI")),E=a("MuoO"),b=l(a("bKel")),w=l(a("3a4m")),y=l(a("wY1l")),N=l(a("8+V3")),L=l(a("vadQ")),O=l(a("t3Un")),C=a("+n12"),k=g["default"].Item,P=(m=(0,E.connect)(function(e){var t=e.global,a=e.loading;return{global:t,logining:a.effects["global/login"]}}),p=g["default"].create(),m(_=p((h=function(e){function t(e){var a;return(0,u["default"])(this,t),a=(0,i["default"])(this,(0,c["default"])(t).call(this,e)),a.handleEnterKey=function(e){13===e.which&&a.handleOk()},a.getReisterCode=function(){var e=a.props.form,t=e.getFieldError,l=e.getFieldValue,n=l("phone"),r=t("phone");!r&&n?(0,O["default"])(L["default"].getReisterCode.api(n),{method:L["default"].getReisterCode.type}).then(function(e){0===e.code?(o["default"].success("\u77ed\u4fe1\u53d1\u9001\u6210\u529f,\u8bf7\u67e5\u6536"),a.setState({time:60}),a.timer=setInterval(function(){var e=a.state.time;e>1?(e--,a.setState({time:e})):(clearInterval(a.timer),a.setState({time:0}))},1e3)):o["default"].error(e.msg)}):o["default"].info("\u8bf7\u8f93\u5165\u6b63\u786e\u768411\u4f4d\u624b\u673a\u53f7")},a.state={time:0},a.timer=null,a}return(0,f["default"])(t,e),(0,s["default"])(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleEnterKey.bind(this))}},{key:"handleOk",value:function(){var e=this.props.form;e.validateFieldsAndScroll(function(e,t){if(!e&&!e){var a=t.code,l=t.phone,n=t.password,r=t.password1;if(n!==r)return void o["default"].error("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u6837");(0,O["default"])(L["default"].validate.api({phone:l,code:a,type:0}),{method:L["default"].validate.type}).then(function(e){return 0===e.code||(o["default"].error(e.msg),!1)}).then(function(e){return e?(0,O["default"])(L["default"].resetPassword.api(),{method:L["default"].resetPassword.type,body:{phone:l,password:n,name:""}}):{}}).then(function(e){e&&0===e.code?o["default"].success("\u91cd\u7f6e\u5bc6\u7801\u6210\u529f\uff01",1.5,function(){w["default"].replace("/login")}):e.msg&&o["default"].error(e.msg)})}})}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer),document.removeEventListener("keydown",this.handleEnterKey)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,l=(t.global,t.logining,this.state.time);return v["default"].createElement("div",{className:N["default"].app},v["default"].createElement("div",{className:N["default"].panel},v["default"].createElement("div",{className:N["default"].bg}),v["default"].createElement("div",{className:N["default"].wraper},v["default"].createElement("img",{className:N["default"].topLeft,src:a("haLz")}),v["default"].createElement("img",{className:N["default"].topRight,src:a("XyXv")}),v["default"].createElement("img",{className:N["default"].bottomLeft,src:a("Iiha")}),v["default"].createElement("img",{className:N["default"].bottomRight,src:a("MIGd")}),v["default"].createElement("div",{className:N["default"].left},v["default"].createElement("img",{className:N["default"].logo,src:a("zspw")}),v["default"].createElement("div",{className:N["default"].titleC},"\u4f9b\u5e94\u94fe\u79d1\u6280\u7ba1\u7406\u7cfb\u7edf"),v["default"].createElement("div",{className:N["default"].titleE},"SUPPLY CHAIN MANAGEMENT SYSTEM"),v["default"].createElement("div",{className:N["default"].welcome},"WELCOME")),v["default"].createElement("div",{className:N["default"].right},v["default"].createElement(g["default"],null,v["default"].createElement("div",{className:N["default"].title},"\u5fd8\u8bb0\u5bc6\u7801"),v["default"].createElement("div",{className:"".concat(N["default"].userName," ").concat(N["default"].pre)},v["default"].createElement(k,null,e("phone",{rules:[{required:!0,pattern:C.regExps.phone,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u768411\u4f4d\u624b\u673a\u53f7"}]})(v["default"].createElement(d["default"],{maxLength:11,prefix:v["default"].createElement("span",{className:N["default"].icon},"+86"),onPressEnter:this.handleOk.bind(this),placeholder:"11\u4f4d\u624b\u673a\u53f7"})))),v["default"].createElement("div",{className:N["default"].code},v["default"].createElement("div",{className:N["default"].input_},v["default"].createElement(k,null,e("code",{rules:[{required:!0,message:"\u8f93\u5165\u9a8c\u8bc1\u7801!"}]})(v["default"].createElement(d["default"],{placeholder:"\u8f93\u5165\u9a8c\u8bc1\u7801",type:"number",autoComplete:!1,onPressEnter:this.handleOk.bind(this),autoCapitalize:!1})))),v["default"].createElement(r["default"],{className:N["default"].button_,disabled:l>0,onClick:this.getReisterCode},l>0?"".concat(l,"\u79d2\u540e\u5931\u6548"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")),v["default"].createElement("div",{className:N["default"].password},v["default"].createElement(k,null,e("password",{rules:[{required:!0,pattern:C.regExps.password,message:"\u8bf7\u8f93\u51656-16\u4f4d\u5bc6\u7801(\u6570\u5b57 \u5b57\u6bcd)"}]})(v["default"].createElement(d["default"],{type:"password",placeholder:"6-16\u4f4d\u5bc6\u7801\uff0c\u533a\u5206\u5927\u5c0f\u5199"})))),v["default"].createElement("div",{className:N["default"].password},v["default"].createElement(k,null,e("password1",{rules:[{required:!0,pattern:C.regExps.password,message:"\u8bf7\u8f93\u51656-16\u4f4d\u5bc6\u7801(\u6570\u5b57 \u5b57\u6bcd)"}]})(v["default"].createElement(d["default"],{type:"password",placeholder:"\u786e\u8ba4\u5bc6\u7801"}))))),v["default"].createElement("div",{className:N["default"].button,onClick:this.handleOk.bind(this)},"\u91cd\u7f6e"),v["default"].createElement(y["default"],{className:N["default"].toLogin,to:"/login"},"\u4f7f\u7528\u5df2\u6709\u8d26\u6237\u767b\u5f55")))))}}]),t}(v.Component),_=h))||_)||_),R=(0,b["default"])(P);t["default"]=R},"8+V3":function(e,t,a){e.exports={app:"app___2ulJr",panel:"panel___2bUtW",bg:"bg___12aGq",wraper:"wraper___3M9ib",left:"left___Rcc4f",logo:"logo___3voFS",titleC:"titleC___1xF9x",titleE:"titleE___RTQ7a",welcome:"welcome___22C_Z",right:"right___21oxJ",title:"title___3rLQX",userName:"userName___6yJFl",pre:"pre___2jkbc",icon:"icon___1X39i",code:"code___1se-f",input_:"input____1ZQoq",button_:"button____3WLG7",password:"password___2lOoK",button:"button___oKpA-",toLogin:"toLogin___2cxp-",topLeft:"topLeft___3GObb",topRight:"topRight___1YyKP",bottomLeft:"bottomLeft___IOMaX",bottomRight:"bottomRight___yOmOl",input:"input___2Ar4V"}},vadQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var l={getReisterCode:{api:function(e){return"/supplychainfinance-user/user/getValidateCodeWithHasAccount?phone=".concat(e)},type:"POST"},validate:{api:function(e){var t=e.phone,a=e.code,l=e.type;return"/supplychainfinance-user/user/validate?account=".concat(t,"&code=").concat(a,"&type=").concat(l)},type:"POST"},resetPassword:{api:function(){return"/supplychainfinance-user/user/resetPassword"},type:"POST"}};t["default"]=l}}]);