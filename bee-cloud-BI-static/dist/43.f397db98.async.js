(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{I9GT:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a("miYZ");var l,d,o,c=n(a("tsqr")),u=n(a("p0pE")),i=n(a("2Taf")),s=n(a("vZ4D")),p=n(a("l4Ni")),h=n(a("ujKo")),f=n(a("MhPg")),m=r(a("q1tI")),g=n(a("3a4m")),y=a("MuoO"),b=a("M7Dx"),T=a("XHmt"),v=r(a("f97x")),I={name:"huhao"},k=function(e){var t=e.getFieldDecorator,a=e.productsOptions,n={};return m["default"].createElement(m["default"].Fragment,null,m["default"].createElement(b.FormItemInputSearch,{getFieldDecorator:t,label:"",fieldId:"contractNum",required:!1,inputProps:{placeholder:"\u6309\u5408\u540c\u7f16\u53f7\u8fdb\u884c\u67e5\u8be2"},formItemLayout:n}),m["default"].createElement(b.FormItemSelect,{getFieldDecorator:t,label:"\u4ea7\u54c1\u540d\u79f0",fieldId:"productId",required:!1,selectProps:{options:a},formItemLayout:n}),m["default"].createElement(b.FormItemRangePicker,{getFieldDecorator:t,label:"\u5408\u540c\u7b7e\u8ba2\u65e5\u671f",fieldId:"dateRange",required:!1,datePickerProps:{format:"YYYY-MM-DD"},formItemLayout:n}))},D=(0,T.SearchFormHOC)(I)(k),C=(0,T.TableForParentTab)(I)(D),S=(l=(0,y.connect)(function(e){var t=e.purchase,a=e.loading;return{productsOptions:t.productsOptions,listSearchParams:t.listSearchParams,dataObj:t.dataObj,loading:a.effects["purchase/getListEffect"]}}),l((o=function(e){function t(){var e,a;(0,i["default"])(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=(0,p["default"])(this,(e=(0,h["default"])(t)).call.apply(e,[this].concat(r))),a.state={parentTabs:[{cName:"\u672a\u5b8c\u6210",key:"1",value:"0"},{cName:"\u5df2\u5b8c\u6210",key:"2",value:"1"}],selfKey:void 0,currentTabKey:"1"},a.handleFormChange=function(e){var t=a.props.dispatch;t({type:"purchase/cacheSearchParamsReduce",payload:e})},a.handleSearch=function(){a.getTableData({},a.state.selfKey)},a.handleTabChange=function(e){a.handleFormChange(),"1"===e?(a.getTableData({},a.state.parentTabs[0].value),a.setState({selfKey:"0",currentTabKey:e})):(a.getTableData({},a.state.parentTabs[1].value),a.setState({selfKey:"1",currentTabKey:e}))},a.handleTableChange=function(e){a.getTableData({payload:e},a.state.selfKey)},a.getSearchOptions=function(e){var t=e.productsOptions,n=a.props.listSearchParams,r=(0,u["default"])({},n,{productId:t[0].value,completed:"0",contractNum:""});a.handleFormChange(r),a.getTableData({payload:r})},a.getTableData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n={payload:e.payload||{}},r={sort:"desc"},l=a.props,d=l.listSearchParams,o=l.dispatch,i=(0,u["default"])({},d,{completed:t}),s=(0,u["default"])({},i,n.payload),p=null;p=s.dateRange?(0,u["default"])({},s.dateRange):{startTime:s.startTime,endTime:s.endTime};var h=s.productId,f=s.currentPage,m=s.pageSize,g=s.searchCount,y=s.contractNum,b=s.completed,T=(0,u["default"])({currentPage:f,pageSize:m,searchCount:g,contractNum:y,productId:h,completed:b,dateRange:p},r,p);o({type:"purchase/getListEffect",payload:T,callback:function(e,t,a){"error"===t&&c["default"].error(a)}})},a.handleFormAdd=function(){g["default"].push("/purchase/order/add")},a.handleCheckDetail=function(e){try{_czc1.push(["_trackEvent","\u91c7\u8d2d\u8ba2\u5355","\u67e5\u770b\u8be6\u60c5","","",""])}catch(e){}g["default"].push("/purchase/order/detail?contractBusinessId=".concat(e.contractBusinessId))},a}return(0,f["default"])(t,e),(0,s["default"])(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"purchase/getProductsEffect",callback:function(t,a,n){"ok"===a&&e.getSearchOptions({productsOptions:t})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.parentTabs,n=t.currentTabKey;if(0===a.length)return m["default"].createElement("h1",{style:{marginLeft:"40%"}},"\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5f00\u542f\u5f53\u524d\u9875\u9762");var r=this.props,l=r.productsOptions,d=r.loading,o=r.listSearchParams,c=r.dataObj,i={productsOptions:l,dataDetail:o,handleSearch:this.handleSearch,onChange:this.handleFormChange},s=[{title:"\u91c7\u8d2d\u5408\u540c\u53f7",dataIndex:"contractNum",key:"contractNum"},{title:"\u4f9b\u5e94\u5546",dataIndex:"supplierName",key:"supplierName"},{title:"\u5408\u540c\u6570\u91cf",dataIndex:"quantity",key:"quantity"},{title:"\u5408\u540c\u91d1\u989d",dataIndex:"amount",key:"amount"},{title:"\u5408\u540c\u72b6\u6001",dataIndex:"completed",key:"completed",render:function(e){return m["default"].createElement("span",null,v.completed[e])}},{title:"\u5408\u540c\u7b7e\u8ba2\u65e5\u671f",dataIndex:"signDate",key:"signDate"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(t,a){return m["default"].createElement("span",null,m["default"].createElement("a",{onClick:function(){return e.handleCheckDetail(a)}},"\u67e5\u770b\u8be6\u60c5"))}}],p=(0,u["default"])({loading:d,columns:s,data:c||{list:[],pagination:{}},bordered:!1,handleTabChange:this.handleTabChange,handleTableChange:this.handleTableChange,handleBtnAdd:!0,handleBtnAddText:"+\u65b0\u589e\u5408\u540c",handleFormAdd:this.handleFormAdd,currentTab:n,parentTabs:a,childTabs:null},i);return m["default"].createElement(C,p)}}]),t}(m.Component),d=o))||d),F=S;t["default"]=F}}]);