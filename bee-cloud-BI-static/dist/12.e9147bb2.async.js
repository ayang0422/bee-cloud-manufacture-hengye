(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"6uLf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chineseToNum=u,t.numToChinese=void 0;var a={0:"\u96f6",1:"\u4e00",2:"\u4e8c",3:"\u4e09",4:"\u56db",5:"\u4e94",6:"\u516d",7:"\u4e03",8:"\u516b",9:"\u4e5d"},c={10:"\u5341",100:"\u767e",1000:"\u5343"},r=function(e){for(var t,n=e.toString().split(""),r=function(e){for(var t=[],n=0,a=e.length;n<a;n++)t.push({Unit:e[n],BigUnit:"1".concat(Array(a-n).join("0"))});return t}(n),o="",i=function(e,i){"0"==t&&"0"==r[e].Unit||(o+=function(){var t=n.slice(e).join("");return 0!=e&&t.match(/^0+$/i)?"":0==e&&"10"==r[e].BigUnit&&"1"==r[e].Unit?"":a[r[e].Unit]}()+("0"!=r[e].Unit&&"undefined"!==typeof c[r[e].BigUnit]?c[r[e].BigUnit]:""),t=r[e].Unit)},s=0,u=r.length;s<u;s++)i(s,u);return o},o=function(e){e=e||0;var t,n,a,c=e.toString().split("").reverse().join(""),o=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?/i,i=o.exec(c);i[1]&&(t=i[1].split("").reverse().join("")),i[2]&&(n=i[2].split("").reverse().join("")),i[3]&&(a=i[3].split("").reverse().join(""));var s="";return a&&a.match(/[^0]/i)&&(s="".concat(s+r(a),"\u4ebf")),n&&n.match(/[^0]/i)&&(s="".concat(s+r(n),"\u4e07")),t&&s&&t.match(/^0+$/i)||(s+=r(t)),s};t.numToChinese=o;var i={"\u96f6":0,"\u4e00":1,"\u4e8c":2,"\u4e09":3,"\u56db":4,"\u4e94":5,"\u516d":6,"\u4e03":7,"\u516b":8,"\u4e5d":9},s={"\u5341":{value:10,secUnit:!1},"\u767e":{value:100,secUnit:!1},"\u5343":{value:1e3,secUnit:!1},"\u4e07":{value:1e4,secUnit:!0},"\u4ebf":{value:1e8,secUnit:!0}};function u(e){for(var t=0,n=0,a=0,c=!1,r=e.split(""),o=0;o<r.length;o++){var u=i[r[o]];if("undefined"!==typeof u)a=u,o===r.length-1&&(n+=a);else{var l=s[r[o]].value;c=s[r[o]].secUnit,c?(n=(n+a)*l,t+=n,n=0):n+=a*l,a=0}}return t+n}},y955:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var c=a(n("p0pE")),r=a(n("Y/ft")),o=a(n("d6i3")),i=a(n("qIgq")),s=n("LvDl"),u=n("6uLf"),l=n("x5D9"),d={namespace:"LogisticsOrderModel",state:{requestType:"buyLogisticsBatch",locationOptions:[],contractInfoDTO:{},logisticsBatchDTOS:[],collapseActivityKey:"",transportSectionOBJ:{},transportSectionOBJOrigin:{}},effects:{getLogisticsBatchInfoEffect:o["default"].mark(function e(t,n){var a,c,r,s,u,d,f,p,h,v,g;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,c=t.callback,r=n.call,s=n.all,u=n.put,n.select,e.next=4,s([r(l.getLogisticsBatchSectionInfo,a),r(l.getLocationList,{})]);case 4:if(d=e.sent,f=(0,i["default"])(d,2),p=f[0],h=f[1],!h||!p){e.next=19;break}if(1!==h.code||1!==p.code){e.next=15;break}return v=h.object.map(function(e){return{value:"".concat(e.id),label:e.name,origin:e}}),e.next=13,u({type:"getLogisticsBatchInfoReduce",payload:{locationOptions:v,logisticsBatchInfo:p.object,requestType:a.requestType}});case 13:e.next=17;break;case 15:g=h.message||p.message||"getLogisticsBatchInfoEffect-error",c("","error",g);case 17:e.next=20;break;case 19:c&&c("","error","getLogisticsBatchInfoEffect-error");case 20:case"end":return e.stop()}},e)}),addSectionListEffect:o["default"].mark(function e(t,n){var a,c,r,i,l,d,f,p;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,c=n.put,r=n.select,e.next=4,r(function(e){return e.LogisticsOrderModel});case 4:return i=e.sent,l=i.transportSectionOBJ,d=(0,s.cloneDeep)(l),f=d[a.batchId]||[],p="".concat((0,s.random)(0,9999),"_section"),f.push({transportSectionId:p,key:p,transportSectionName:"\u7b2c".concat((0,u.numToChinese)(f.length+1),"\u9636\u6bb5"),transportMode:"1",startingPlaceId:"1",arrivalPlaceId:"1",toFactory:"0",editable:!0}),d[a.batchId]=f,e.next=13,c({type:"cacheSectionListEffect",payload:d});case 13:case"end":return e.stop()}},e)}),deleteSectionListEffect:o["default"].mark(function e(t,n){var a,c,r,i,u,l,d,f,p,h;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,c=n.put,r=n.select,i=a.collapseActivityKey,u=a.transportSectionId,e.next=5,r(function(e){return e.LogisticsOrderModel});case 5:return l=e.sent,d=l.transportSectionOBJ,f=(0,s.cloneDeep)(d),p=f[i],h=p.filter(function(e){return e.transportSectionId!==u}),f[i]=h,e.next=13,c({type:"cacheSectionListEffect",payload:f});case 13:case"end":return e.stop()}},e)}),cacheSectionListEffect:o["default"].mark(function e(t,n){var a,c,r,i,u,l;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.payload,c=n.put,r=n.select,i=a,i){e.next=9;break}return e.next=6,r(function(e){return e.LogisticsOrderModel});case 6:u=e.sent,l=u.transportSectionOBJOrigin,i=(0,s.cloneDeep)(l);case 9:return e.next=11,c({type:"cacheSectionListReduce",payload:i});case 11:case"end":return e.stop()}},e)}),cacheCollapseActivityKeyEffect:o["default"].mark(function e(t,n){var a,c;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,c=n.put,e.next=4,c({type:"cacheCollapseActivityKeyReduce",payload:a});case 4:case"end":return e.stop()}},e)}),addBatchListEffect:o["default"].mark(function e(t,n){var a,c,r,i,l;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.payload,a=n.put,c=n.select,e.next=4,c(function(e){return e.LogisticsOrderModel});case 4:return r=e.sent,i=r.logisticsBatchDTOS,l=(0,s.cloneDeep)(i),l.push({batchId:"".concat((0,s.random)(999,9999),"_batch"),batchName:"\u7b2c".concat((0,u.numToChinese)(l.length+1),"\u6279\u6b21"),arrivalVolume:0,contractBusinessId:"",freightVolume:""}),e.next=10,a({type:"addBatchListReduce",payload:l});case 10:case"end":return e.stop()}},e)}),saveSectionListEffect:o["default"].mark(function e(t,n){var a,i,s,u,d,f,p,h,v,g,y,S,b,O,I;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.payload,a=t.callback,i=n.select,n.put,s=n.call,e.next=4,i(function(e){return e.LogisticsOrderModel});case 4:if(u=e.sent,d=u.contractInfoDTO.contractBusinessId,f=u.transportSectionOBJ,p=u.collapseActivityKey,h=u.requestType,v=f[p],v&&0!==v.length){e.next=14;break}a("","error","\u6682\u65e0\u6570\u636e\u53ef\u4fdd\u5b58"),e.next=25;break;case 14:if(g=v.filter(function(e){return e.disabled}),y=v.filter(function(e){return!e.disabled}),0!==y.length){e.next=19;break}return a("","error","\u6682\u65e0\u6570\u636e\u53ef\u4fdd\u5b58"),e.abrupt("return");case 19:return S=y.map(function(e,t){e.editable,e.transportSectionId,e.key;var n=(0,r["default"])(e,["editable","transportSectionId","key"]),a=g.length+t;return(0,c["default"])({},n,{transportSection:a})}),b={batchId:p.includes("batch")?"":p,contractBusinessId:d,transportSectionDTOS:S,requestType:h},e.next=23,s(l.saveLogisticsSectionInfo,b);case 23:O=e.sent,O&&1===O.code?a("","ok","\u4fdd\u5b58\u6279\u6b21\u53ca\u9636\u6bb5\u6210\u529f"):a&&(I=O&&O.message||"saveLogisticsSectionInfo-error",a("","error",I));case 25:case"end":return e.stop()}},e)}),getTransportSectionAllDetailEffect:o["default"].mark(function e(t,n){var a,c,r,i,s;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,c=t.callback,r=n.call,n.put,n.select,e.next=4,r(l.getTransportSectionAllDetail,a);case 4:i=e.sent,i&&1===i.code||c&&(s=i&&i.message||"getTransportSectionAllDetail-error",c("","error",s));case 6:case"end":return e.stop()}},e)}),saveLogisticsSectionInfoEffect:o["default"].mark(function e(t,n){var a,c,r,i,s;return o["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,c=t.callback,r=n.call,n.put,n.select,e.next=4,r(l.saveLogisticsSectionInfo,a);case 4:i=e.sent,i&&1===i.code?c("","ok","\u4fdd\u5b58\u6210\u529f"):c&&(s=i&&i.message||"saveLogisticsSectionInfo-error",c("","error",s));case 6:case"end":return e.stop()}},e)})},reducers:{getLogisticsBatchInfoReduce:function(e,t){var n=t.payload,a=n.locationOptions,o=n.requestType,i=n.logisticsBatchInfo,s=i.contractInfoDTO,u=i.logisticsBatchDTOS,l={},d=[],f="";return Array.isArray(u)&&u.length>0&&u.forEach(function(e){e.transportSectionDTOS;var t=(0,r["default"])(e,["transportSectionDTOS"]);d.push(t),l[e.batchId]=e.transportSectionDTOS.map(function(e){return(0,c["default"])({},e,{key:e.transportSectionId,editable:!0,disabled:!0})})}),d.length>0&&(f="".concat(d[0].batchId)),(0,c["default"])({},e,{requestType:o,locationOptions:a,contractInfoDTO:s,logisticsBatchDTOS:d,collapseActivityKey:f,transportSectionOBJ:l,transportSectionOBJOrigin:l})},cacheSectionListReduce:function(e,t){var n=t.payload;return(0,c["default"])({},e,{transportSectionOBJ:n})},cacheCollapseActivityKeyReduce:function(e,t){var n=t.payload;return(0,c["default"])({},e,{collapseActivityKey:n})},addBatchListReduce:function(e,t){var n=t.payload;return(0,c["default"])({},e,{logisticsBatchDTOS:n})}}};t["default"]=d}}]);