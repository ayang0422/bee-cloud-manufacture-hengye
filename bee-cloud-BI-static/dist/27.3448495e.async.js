(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{XC6s:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var u=r(a("jehZ")),c=r(a("Y/ft")),l=r(a("p0pE"));a("miYZ");var o=r(a("tsqr")),i=r(a("qIgq")),d=n(a("q1tI")),s=r(a("wd/R")),f=a("MuoO"),m=a("M7Dx"),p=r(a("rn0+")),g=a("/TSs"),h=r(a("sWNy")),N=function(e){var t=e.form.getFieldDecorator,a={};return d["default"].createElement(d["default"].Fragment,null,d["default"].createElement(m.FormItemInputSearch,{getFieldDecorator:t,label:"",fieldId:"custOrSupName",required:!1,formItemLayout:a,inputProps:{placeholder:"\u6309\u5ba2\u6237/\u4f9b\u5e94\u5546\u540d\u79f0\u641c\u7d22"}}),d["default"].createElement(m.FormItemRangePicker,{getFieldDecorator:t,label:"\u8fc7\u78c5\u65e5\u671f",fieldId:"dateRange",required:!1,datePickerProps:{format:"YYYY-MM-DD"},formItemLayout:a}))},S={},I=function(e){var t=e.dispatch,a=(0,d.useState)("descend"),n=(0,i["default"])(a,2),r=n[0],f=n[1],I=(0,d.useState)("1"),b=(0,i["default"])(I,2),y=b[0],v=b[1],O=(0,d.useState)(!1),w=(0,i["default"])(O,2),T=w[0],R=w[1],k=(0,d.useState)([]),x=(0,i["default"])(k,2),E=x[0],M=x[1],D=(0,d.useState)([]),C=(0,i["default"])(D,2),P=C[0],Y=C[1],q=(0,d.useState)([]),W=(0,i["default"])(q,2),j=W[0],F=W[1],L=(0,d.useState)(0),_=(0,i["default"])(L,2),B=_[0],Z=_[1],z=function(e,t){t&&F(t);var a=t.map(function(e){var t={};return t.machineId=e.machineId,t.type=e.type,t.count=B,t.count+=e.netWeight,t.productName=e.productName,t.custOrSupName=e.custOrSupName,t});t.length>0?Z(a[0].count):Z(0),Y(a)},A=function(e){var a=e.isIgnore,n=e.record,r=n.machineId,u=n.type,c={machineId:r,type:u,isIgnore:a};t({type:"contractRelated/ignoreRecoveryMachine",payload:c,callback:function(e,t,a){"error"===t?o["default"].error(a):(S.setInitialValue(),o["default"].success(a)),Y([]),F([]),Z(0)}})},X=[{title:"\u78c5\u5355\u53f7",dataIndex:"machineId"},{title:"\u5ba2\u6237/\u4f9b\u5e94\u5546",dataIndex:"custOrSupName"},{title:"\u627f\u8fd0\u5546",dataIndex:"carrierName"},{title:"\u8f66\u53f7",dataIndex:"trainNumber"},{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productName"},{title:"\u51c0\u91cd",dataIndex:"netWeight"},{title:"\u53f8\u78c5\u5458",dataIndex:"weightMan"},{title:"\u53f8\u78c5\u65e5\u671f",dataIndex:"weighingTime",sortOrder:r,sorter:function(e,t){var a=e.weighingTime.slice(0,4),n=e.weighingTime.slice(5,7),r=e.weighingTime.slice(8,10),u="".concat(a,"-").concat(n,"-").concat(r),c=t.weighingTime.slice(0,4),l=t.weighingTime.slice(5,7),o=t.weighingTime.slice(8,10),i="".concat(c,"-").concat(l,"-").concat(o),d=(0,s["default"])(u).isBefore(i);return d},ellipsis:!0},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,t){return d["default"].createElement("span",null,"1"===y&&d["default"].createElement(d["default"].Fragment,null,d["default"].createElement("a",{onClick:function(){return A({isIgnore:0,record:t})}},"\u5ffd\u7565")),"0"===y&&d["default"].createElement("a",{onClick:function(){return A({isIgnore:1,record:t})}},"\u6062\u590d"))}}],H=function(e,t,a){r!==a.order&&f(a.order)},J=[{value:"1",label:"\u5f85\u5173\u8054"},{value:"0",label:"\u5df2\u5ffd\u7565"}],K=function(e){Y([]),M([]),v(e)},V={parentTabs:J,searchParams:{currentPage:1,orderStage:"",pageSize:10,searchCount:!0,dateRange:{startTime:(0,s["default"])().subtract(30,"days").format("YYYY-MM-DD"),endTime:(0,s["default"])().format("YYYY-MM-DD")},isIgnore:y,custOrSupName:""},handleTableChange:H,onTabChange:K},U=(0,l["default"])({},V,{tableProps:{hasRowSelection:!1,columns:X,selectedRows:P}}),G=(0,l["default"])({},V,{tableProps:{hasRowSelection:!0,columns:X,selectedRows:P,rowSelection:{getCheckboxProps:function(e){return{disabled:0!==j.length&&!(e.custOrSupName===j[0].custOrSupName&&e.productName===j[0].productName),name:e.custOrSupName}}}},operateText:"\u5173\u8054\u5408\u540c",onOperateClick:function(){P.length?R(!0):o["default"].error("\u8bf7\u9009\u62e9")}}),Q={hasAlert:!0,alertLayout:d["default"].createElement("span",null,"\u603b\u8ba1"," ",d["default"].createElement("a",{style:{fontWeight:600}},B)," ","\u5428\xa0\xa0")},$=function(e){var t=e.dateRange,a=e.isIgnore,n=(e.contractNum,e.supplierName,e.custOrSupName),r=(0,c["default"])(e,["dateRange","isIgnore","contractNum","supplierName","custOrSupName"]),u=(0,l["default"])({},{startTime:t.startTime,endTime:t.endTime,isIgnore:a,custOrSupName:n},r);return u},ee=function(e,t){M(t)},te={width:"80%",visible:T,onOk:function(){if(0!==E.length){var e=P.map(function(e){return(0,l["default"])({},e,{contractBusinessId:E[0].contractBusinessId,contractNum:E[0].contractNum})});t({type:"contractRelated/machineBindContract",payload:e,callback:function(e,t,a){"error"===t?o["default"].error(a):(Y([]),M([]),S.setInitialValue(),o["default"].success(a),R(!1),F([]))}})}else o["default"].warning("\u8bf7\u9009\u62e9\u5173\u8054\u5408\u540c")},onCancel:function(){R(!1),M([])},title:"1"===y?"\u5173\u8054\u5408\u540c":"\u6062\u590d",ComProps:{onSelectRow:ee,productName:P&&P.length?P[0].productName:"",custOrSupName:P&&P.length?P[0].custOrSupName:""}},ae="1"===y?(0,l["default"])({},G):(0,l["default"])({},U);return d["default"].createElement("div",{className:h["default"].contractStatement},d["default"].createElement(m.TableWrapper,(0,u["default"])({},ae,{tableWrapperRef:function(e){S=e},listService:g.getWeightMachineWebBindList,currentTabKey:y,paramsHandler:$,handleSelectRows:z,alertProps:Q}),d["default"].createElement(N,null)),d["default"].createElement(p["default"],te))},b=(0,f.connect)()(I);t["default"]=b},"rn0+":function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a("IzEo");var u=n(a("bx4M"));a("miYZ");var c,l,o,i=n(a("tsqr")),d=n(a("p0pE")),s=n(a("2Taf")),f=n(a("vZ4D")),m=n(a("l4Ni")),p=n(a("ujKo")),g=n(a("MhPg")),h=r(a("q1tI")),N=a("MuoO"),S=n(a("DIuU")),I=a("M7Dx"),b=n(a("sWNy")),y=(c=(0,N.connect)(function(e){var t=e.contractRelated,a=e.loading;return{listSearchParams:t.listSearchParams,dataObj:t.dataObj,loading:a.effects["contractRelated/getListEffect"]}}),c((o=function(e){function t(){var e,a;(0,s["default"])(this,t);for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return a=(0,m["default"])(this,(e=(0,p["default"])(t)).call.apply(e,[this].concat(r))),a.handleTableChange=function(e){var t=a.props,n=t.productName,r=t.custOrSupName,u={productName:n,custOrSupName:r,currentPage:e.current,pageSize:e.pageSize};a.getTableData((0,d["default"])({},u))},a.getTableData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.props,n=t.listSearchParams,r=t.dispatch,u=(0,d["default"])({},n,e);r({type:"contractRelated/getListEffect",payload:u,callback:function(e,t,a){"error"===t&&i["default"].error(a)}})},a}return(0,g["default"])(t,e),(0,f["default"])(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.productName,a=e.custOrSupName;this.getTableData({productName:t,custOrSupName:a})}},{key:"render",value:function(){var e=this.props,t=e.dataObj,a=e.onSelectRow,n=[{title:"\u5408\u540c\u7f16\u53f7",dataIndex:"contractNum",key:"contractNum"},{title:"\u5ba2\u6237/\u4f9b\u5e94\u5546",dataIndex:"custOrSupName",key:"custOrSupName"},{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productName",key:"productName"},{title:"\u5408\u540c\u6570\u91cf",dataIndex:"quantity",key:"quantity"},{title:"\u5408\u540c\u91d1\u989d",dataIndex:"amount",key:"amount"},{title:"\u5408\u540c\u7b7e\u8ba2\u65f6\u95f4",dataIndex:"signDate",key:"signDate"}],r={type:"radio"},c={loading:!1,columns:n,data:t,onChange:this.handleTableChange,bordered:!1,scroll:{},hasRowSelection:!0,rowSelection:r,onSelectRow:a};return h["default"].createElement(u["default"],{className:b["default"].cardContainer},h["default"].createElement(S["default"],c))}}]),t}(h.Component),l=o))||l),v=(0,I.CustomModalHOC)(y);t["default"]=v},sWNy:function(e,t,a){e.exports={contractStatement:"contractStatement___fMILZ"}}}]);