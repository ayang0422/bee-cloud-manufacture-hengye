(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{"/Md/":function(e,t,a){e.exports={addBatchStyle:"addBatchStyle___3WxkC",itemRequired:"itemRequired___2aQ3K",customFormItem:"customFormItem___1mrrU",header:"header___2m7Mr",left:"left___IY5kI",title:"title___my17k",info:"info___IiO9J",right:"right___3kMeO",editStyle:"editStyle___1FBxt"}},"1Ku6":function(e,t,a){"use strict";var r=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a("IzEo");var n=r(a("bx4M"));a("14J3");var i=r(a("BMrR"));a("jCWc");var d=r(a("kPKH"));a("+L6B");var c=r(a("2/Rp"));a("P2fV");var o=r(a("NJEC"));a("Pwec");var u=r(a("CtXQ"));a("y8nQ");var f=r(a("Vl3Y")),s=r(a("jehZ")),p=r(a("p0pE"));a("miYZ");var m=r(a("tsqr")),y=r(a("2Taf")),h=r(a("vZ4D")),E=r(a("l4Ni")),v=r(a("ujKo")),g=r(a("MhPg"));a("OaEy");var T=r(a("2fM7"));a("fu2T");var b,C,D,S=r(a("gK9i")),k=l(a("q1tI")),I=a("MuoO"),_=a("LvDl"),P=r(a("4C7b")),M=r(a("2aFH")),O=r(a("/Md/")),F=S["default"].Panel,N=T["default"].Option,A=(b=(0,I.connect)(function(e){var t=e.TransportSectionDetailModel,a=e.loading;return{carrayNameOptions:t.carrayNameOptions,transportSectionDetail:t.transportSectionDetail,carrierTransportDTOS:t.carrierTransportDTOS,collapseActivityKey:t.collapseActivityKey,carrierTransportDetailOBJ:t.carrierTransportDetailOBJ,carrierTransportDetailOBJOrigin:t.carrierTransportDetailOBJOrigin,loading:a.effects["TransportSectionDetailModel/getTransportSectionAllDetailEffect"]}}),b((D=function(e){function t(e){var a;return(0,y["default"])(this,t),a=(0,E["default"])(this,(0,v["default"])(t).call(this,e)),a.getInfo=function(){var e=a.props.dispatch,t=a.props.location.query,r=t.requestType,l=t.transportSectionId,n=t.completed;a.setState({completed:n});var i={transportSectionId:l,requestType:r};e({type:"TransportSectionDetailModel/getTransportSectionAllDetailEffect",payload:i,callback:function(e,t,a){"error"===t&&m["default"].error(a)}})},a.handleEditEnable=function(){var e=a.state.isEditing;a.setState({isEditing:!e})},a.handleTableSve=function(e){var t=a.props,r=t.dispatch,l=t.collapseActivityKey,n=t.carrierTransportDetailOBJ,i=(0,_.cloneDeep)(n);(0,_.isEqual)(i[l],e)||(i[l]=e,r({type:"TransportSectionDetailModel/cacheTransportDetailListEffect",payload:i,callback:function(e,t,a){"error"===t&&m["default"].error(a)}}))},a.handleAddCarrierTransport=function(e){try{_czc1.push(["_trackEvent","\u7269\u6d41\u8ba2\u5355","\u65b0\u589e\u8fd0\u8f7d\u5355\u4f4d","","",""])}catch(e){}var t=a.props.dispatch;t({type:"TransportSectionDetailModel/addTransportDetailListEffect",payload:{id:e},callback:function(e,t,a){"error"===t?m["default"].error(a):m["default"].success(a)}})},a.handleDeleteSection=function(e){var t=a.props.dispatch;t({type:"TransportSectionDetailModel/deleteTransportDetailListEffect",payload:e,callback:function(e,t,a){"error"===t?m["default"].error(a):m["default"].success(a)}})},a.handleSaveCarrayOk=function(){var e=a.props.dispatch;e({type:"TransportSectionDetailModel/saveCarrayListEffect",payload:{},callback:function(e,t,r){"error"===t?m["default"].error(r):(m["default"].success(r),a.handleSaveCarrayCancle())}})},a.handleSaveCarrayCancle=function(){a.getInfo(),a.handleEditEnable()},a.handleCollapseChange=function(e){var t=a.props.dispatch;t({type:"TransportSectionDetailModel/cacheCollapseActivityKeyEffect",payload:e,callback:function(e,t,a){"error"===t&&m["default"].error(a)}})},a.handleAddCarray=function(){var e=a.props.dispatch;e({type:"TransportSectionDetailModel/addCarrayListEffect",payload:{},callback:function(e,t,a){"error"===t?m["default"].error(a):m["default"].success(a)}})},a.handleCarrayFormChange=function(e,t){var r=a.props.carrierTransportDTOS,l=r.map(function(a){var r=(0,p["default"])({},a);return a.id===t&&(r=(0,p["default"])({},a,e)),r}),n=a.props.dispatch;n({type:"TransportSectionDetailModel/cacheCarrayListReduce",payload:l,callback:function(e,t,a){"error"===t?m["default"].error(a):m["default"].success(a)}})},a.rendercarrierNameInput=function(e){var t=a.state.completed,r=e.carrierId,l=e.id,n=e.disabled,i=a.props.carrayNameOptions,d={labelCol:{span:6},wrapperCol:{span:18}};return k["default"].createElement("div",{style:{display:"flex",justifyContent:"space-between"}},k["default"].createElement("div",{style:{width:300},onClick:function(e){e.stopPropagation()}},k["default"].createElement(f["default"].Item,(0,s["default"])({label:"\u627f\u8fd0\u65b9"},d,{style:{marginBottom:0}}),k["default"].createElement(T["default"],{placeholder:"\u8bf7\u9009\u62e9\u627f\u8fd0\u5546",value:"".concat(r),disabled:n,style:{width:"100%"},onSelect:function(e){a.handleCarrayFormChange({carrierId:e},l)}},i.map(function(e){return k["default"].createElement(N,{value:e.value},e.label)})))),k["default"].createElement("div",{style:{width:40},onClick:function(e){e.stopPropagation()}},0===Number(t)&&k["default"].createElement("a",{className:O["default"].editStyle},k["default"].createElement(u["default"],{type:"edit",style:{fontSize:20},onClick:function(e){e.stopPropagation(),a.handleEditEnable()}}))))},a.renderPanel=function(){var e=a.state,t=e.isEditing,r=e.completed,l=a.props,n=l.carrierTransportDTOS,i=l.carrierTransportDetailOBJ,d=l.collapseActivityKey,f=[{title:k["default"].createElement("span",{className:O["default"].itemRequired},"\u8fd0\u8f7d\u5355\u4f4d\u7f16\u53f7"),dataIndex:"trainNumber",key:"trainNumber",editable:!0,inputType:"input"},{title:"\u53f8\u673a",dataIndex:"driver",key:"driver",editable:!0,inputType:"input"},{title:"\u624b\u673a\u53f7",dataIndex:"contact",key:"contact",editable:!0,inputType:"input"},{title:k["default"].createElement("span",{className:O["default"].itemRequired},"\u5428\u4f4d"),dataIndex:"cargoWeight",key:"cargoWeight",editable:!0,inputType:"input"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,t){return t.disabled?null:k["default"].createElement(o["default"],{title:"\u786e\u8ba4\u5220\u9664\u5417?",onConfirm:function(){return a.handleDeleteSection({collapseActivityKey:d,id:t.id})},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},k["default"].createElement("a",null,"\u5220\u9664"))}}];return n.map(function(e){var l=e.carrierId,n=e.id,d=e.unitPrice,o=e.carriage,s=e.departureTime,p=e.estimateArrivalTime,m={unitPrice:d,carriage:o,departureTime:s,estimateArrivalTime:p},y=!(n&&"".concat(n).includes("id")),h={carrierId:l,id:n,disabled:y};return k["default"].createElement(F,{header:a.rendercarrierNameInput(h),key:n},k["default"].createElement(P["default"],{title:function(){return k["default"].createElement(M["default"],{dataDetail:m,onChange:function(e){return a.handleCarrayFormChange(e,n)},disabled:y})},dataSource:i[e.id]||[],columns:f,handleTableSve:a.handleTableSve,footer:function(){return!t&&y||0!==Number(r)?null:k["default"].createElement(k["default"].Fragment,null,k["default"].createElement("div",null,k["default"].createElement(c["default"],{type:"dashed",onClick:function(){return a.handleAddCarrierTransport(e.id)},style:{width:"100%",height:40,marginTop:5,marginBottom:10}},k["default"].createElement(u["default"],{type:"plus"})," \u65b0\u589e\u8fd0\u8f7d\u5355\u4f4d")),k["default"].createElement("div",null,k["default"].createElement(c["default"],{type:"primary",onClick:a.handleSaveCarrayOk},"\u4fdd\u5b58"),k["default"].createElement(c["default"],{type:"default",onClick:a.handleSaveCarrayCancle,style:{display:"inline-block",marginLeft:10}},"\u53d6\u6d88")))}}))})},a.state={isEditing:!1,completed:0},a}return(0,g["default"])(t,e),(0,h["default"])(t,[{key:"componentDidMount",value:function(){this.getInfo()}},{key:"render",value:function(){var e=this.state.completed,t=this.props,a=t.collapseActivityKey,r=t.transportSectionDetail;return k["default"].createElement(k["default"].Fragment,null,k["default"].createElement(i["default"],{className:O["default"].header},k["default"].createElement(d["default"],{span:16,className:O["default"].left},k["default"].createElement("div",{className:O["default"].title},"\u6279\u6b21-\u9636\u6bb5\u8be6\u60c5"),k["default"].createElement(i["default"],{className:O["default"].info},k["default"].createElement(d["default"],{span:10},k["default"].createElement("span",null,"\u8fd0\u8f93\u65b9\u5f0f:"),k["default"].createElement("span",null,r.transportModeName)),k["default"].createElement(d["default"],{span:10},k["default"].createElement("span",null,"\u662f\u5426\u5230\u5382:"),k["default"].createElement("span",null,1===r.toFactory?"\u662f":"\u5426")),k["default"].createElement(d["default"],{span:10},k["default"].createElement("span",null,"\u8d77\u59cb\u5730:"),k["default"].createElement("span",null,r.startingPlace)),k["default"].createElement(d["default"],{span:10},k["default"].createElement("span",null,"\u5230\u8fbe\u5730:"),k["default"].createElement("span",null,r.arrivalPlace))))),k["default"].createElement(n["default"],{style:{margin:" 24px 32px"},title:"\u627f\u8fd0\u5546\u60c5\u51b5"},k["default"].createElement(S["default"],{accordion:!0,activeKey:a,onChange:this.handleCollapseChange},this.renderPanel()),0===Number(e)&&k["default"].createElement(c["default"],{type:"dashed",onClick:this.handleAddCarray,style:{width:"98%",height:40,marginTop:20,marginRight:"1%",marginLeft:"1%"}},k["default"].createElement(u["default"],{type:"plus"})," \u65b0\u589e\u627f\u8fd0\u5546")))}}]),t}(k.Component),C=D))||C),q=A;t["default"]=q},"2aFH":function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a("14J3");var l=r(a("BMrR"));a("jCWc");var n=r(a("kPKH")),i=r(a("q1tI")),d=a("M7Dx"),c=function(e){var t=e.form.getFieldDecorator,a=e.disabled,r={labelCol:{span:8},wrapperCol:{span:16}};return i["default"].createElement(l["default"],{gutter:8},i["default"].createElement(n["default"],{span:6},i["default"].createElement(d.FormItemInput,{getFieldDecorator:t,label:"\u5355\u4ef7",fieldId:"unitPrice",required:!1,formItemLayout:r,inputProps:{disabled:a}})),i["default"].createElement(n["default"],{span:6},i["default"].createElement(d.FormItemInput,{getFieldDecorator:t,label:"\u8fd0\u8d39",fieldId:"carriage",required:!1,formItemLayout:r,inputProps:{disabled:a}})),i["default"].createElement(n["default"],{span:6},i["default"].createElement(d.FormItemDatePicker,{getFieldDecorator:t,label:"\u51fa\u53d1\u65f6\u95f4",fieldId:"departureTime",required:!0,formItemLayout:r,datePickerProps:{disabled:a}})),i["default"].createElement(n["default"],{span:6},i["default"].createElement(d.FormItemDatePicker,{getFieldDecorator:t,label:"\u9884\u8ba1\u5230\u8fbe\u65f6\u95f4",fieldId:"estimateArrivalTime",required:!0,formItemLayout:r,datePickerProps:{disabled:a}})))},o=(0,d.CustomFormHOC)(c),u=o;t["default"]=u}}]);