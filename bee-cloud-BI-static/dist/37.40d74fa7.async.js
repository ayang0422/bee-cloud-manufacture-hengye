(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{WoCI:function(e,t,a){e.exports={container:"container___3iJ1C",formPart:"formPart___1304Z",partTitle:"partTitle___2-PTQ",footer:"footer___3tdua"}},klIE:function(e,t,a){"use strict";var r=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var n=r(a("q1tI"));a("IzEo");var i=l(a("bx4M"));a("+L6B");var u=l(a("2/Rp"));a("giR+");var d=l(a("fyUT"));a("/zsF");var c=l(a("PArb"));a("miYZ");var o=l(a("tsqr")),f=l(a("p0pE")),s=l(a("2Taf")),m=l(a("vZ4D")),p=l(a("l4Ni")),h=l(a("ujKo")),v=l(a("MhPg"));a("5NDa");var y=l(a("5rEg"));a("OaEy");var g=l(a("2fM7"));a("y8nQ");var E,b,I,S=l(a("Vl3Y")),k=l(a("WoCI")),w=l(a("bKel")),N=l(a("3a4m")),C=l(a("wd/R")),W=r(a("+n12")),F=a("lUUk"),T=S["default"].Item,_=g["default"].Option,M=y["default"].TextArea,B=(E=S["default"].create(),(0,w["default"])(b=E((I=function(e){function t(){var e,a;(0,s["default"])(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return a=(0,p["default"])(this,(e=(0,h["default"])(t)).call.apply(e,[this].concat(l))),a.state={carriers:[],people:[],product:[],devices:[],buttonState:0,inFactoryWeightByManual:0,inFactoryWeight:null,arrivalTime:(0,C["default"])().format("YYYY-MM-DD HH:mm:ss")},a.getTrain=function(){var e=a.props.form,t=e.validateFields,r=e.setFieldsValue;t(["trainNumber"],function(e,t){if(!e&&t.trainNumber){var a={trainNumber:t.trainNumber,type:2},l=W.queryString(a);(0,F.getLastCarrierByTrainNumber)(l).then(function(e){e&&1===e.code&&r({carrierId:e.object.carrierId||null})})}})},a.getWeight=function(){var e=a.props.form.validateFields;e(["deviceId"],function(e,t){!e&&t.deviceId&&(0,F.getWeight)(t.deviceId).then(function(e){e&&1===e.code&&("0"===e.object?a.setState({inFactoryWeight:0,buttonState:2}):a.setState({inFactoryWeight:Number(e.object),buttonState:1}))})})},a.handleSave=function(){var e=a.props.form.validateFields,t=a.state,r=t.carriers,l=t.people,n=t.product,i=t.inFactoryWeightByManual,u=(t.inFactoryWeight,t.arrivalTime);e(function(e,t){if(!e){var a=r.filter(function(e){return t.carrierId===e.carrierId}),d=l.filter(function(e){return t.receivingCompanyId===e.id}),c=n.filter(function(e){return t.productId===e.id}),s=(0,f["default"])({},t,{carrierName:a.length?a[0].carrierName:void 0,receivingCompany:d.length?d[0].name:void 0,productName:c.length?c[0].name:void 0,inFactoryWeightByManual:i,arrivalTime:u});(0,F.saveSaleWeightMachine)(s).then(function(e){e&&1===e.code?(o["default"].success(e.message),N["default"].goBack()):o["default"].error(e.message)})}})},a}return(0,v["default"])(t,e),(0,m["default"])(t,[{key:"componentDidMount",value:function(){var e=this;(0,F.getCarrierInfoList)().then(function(t){t&&1===t.code&&e.setState({carriers:t.object})}),(0,F.getWeightSelectList)().then(function(t){t&&1===t.code&&e.setState({devices:t.object})}),(0,F.getAllCustomerAndSupplier)().then(function(t){t&&1===t.code&&e.setState({people:t.object})}),(0,F.getProductListByCategory)().then(function(t){t&&1===t.code&&e.setState({product:t.object})})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,r=a.carriers,l=a.people,o=a.product,f=a.devices,s=a.buttonState,m=a.inFactoryWeight,p=a.arrivalTime;return n["default"].createElement("div",{className:k["default"].container},n["default"].createElement(i["default"],{title:"\u8fc7\u78c5\u8f66\u8f86",bordered:!1},n["default"].createElement("div",{className:k["default"].formPart},n["default"].createElement("span",{className:k["default"].partTitle},"\u8f66\u8f86\u4fe1\u606f"),n["default"].createElement(S["default"],null,n["default"].createElement(T,{label:"\u8f66\u724c\u53f7"},t("trainNumber",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8f66\u724c\u53f7"}]})(n["default"].createElement(y["default"],{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165\u8f66\u724c\u53f7",onBlur:this.getTrain.bind(this)}))),n["default"].createElement(T,{label:"\u53f8\u673a"},t("driver")(n["default"].createElement(y["default"],{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165\u53f8\u673a"}))),n["default"].createElement(T,{label:"\u8054\u7cfb\u65b9\u5f0f"},t("contact")(n["default"].createElement(y["default"],{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u65b9\u5f0f"}))),n["default"].createElement(T,{label:"\u627f\u8fd0\u65b9"},t("carrierId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u627f\u8fd0\u65b9"}]})(n["default"].createElement(g["default"],{style:{width:"80%"},placeholder:"\u8bf7\u9009\u62e9\u627f\u8fd0\u65b9"},r.map(function(e){return n["default"].createElement(_,{value:e.carrierId,key:e.carrierId},e.carrierName)})))),n["default"].createElement(T,{label:"\u6536\u8d27\u5355\u4f4d"},t("receivingCompanyId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6536\u8d27\u5355\u4f4d"}]})(n["default"].createElement(g["default"],{style:{width:"80%"},placeholder:"\u8bf7\u9009\u62e9\u6536\u8d27\u5355\u4f4d"},l.map(function(e){return n["default"].createElement(_,{value:e.id,key:e.id},e.name)})))),n["default"].createElement(T,{label:"\u4ea7\u54c1\u540d\u79f0"},t("productId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ea7\u54c1\u540d\u79f0"}]})(n["default"].createElement(g["default"],{style:{width:"80%"},placeholder:"\u8bf7\u9009\u62e9\u4ea7\u54c1\u540d\u79f0"},o.map(function(e){return n["default"].createElement(_,{value:e.id,key:e.id},e.name)})))))),n["default"].createElement(c["default"],null),n["default"].createElement("div",{className:k["default"].formPart},n["default"].createElement("span",{className:k["default"].partTitle},"\u79f0\u91cd\u4fe1\u606f"),n["default"].createElement(S["default"],null,n["default"].createElement(T,{label:"\u79f0\u91cd\u8bbe\u5907"},t("deviceId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u79f0\u91cd\u8bbe\u5907"}]})(n["default"].createElement(g["default"],{style:{width:"80%"},placeholder:"\u8bf7\u9009\u62e9\u79f0\u91cd\u8bbe\u5907"},f.map(function(e,t){return n["default"].createElement(_,{value:e.deviceId,key:e.deviceId},e.name)})))),n["default"].createElement(T,{label:"\u8fdb\u5382\u6570\u91cf"},t("inFactoryWeight",{initialValue:m,rules:[{required:!0,message:"\u8bf7\u79f0\u91cd"}]})(n["default"].createElement(d["default"],{disabled:3!==s,precision:2,style:{width:"60%"},placeholder:"\u8bf7\u79f0\u91cd"})),0===s?n["default"].createElement(u["default"],{onClick:this.getWeight.bind(this),type:"primary",style:{marginLeft:24}},"\u8fdb\u5382\u79f0\u91cd"):1===s?n["default"].createElement(u["default"],{onClick:function(){return e.setState({buttonState:2})},type:"primary",style:{marginLeft:24}},"\u786e\u8ba4\u79f0\u91cd"):2===s?n["default"].createElement(u["default"],{onClick:function(){return e.setState({buttonState:3,inFactoryWeightByManual:1})},type:"primary",style:{marginLeft:24}},"\u624b\u52a8\u4fee\u6539"):3===s?n["default"].createElement(u["default"],{onClick:function(){return e.setState({buttonState:2})},type:"primary",style:{marginLeft:24}},"\u786e\u8ba4\u79f0\u91cd"):null),n["default"].createElement(T,{label:"\u5b9e\u9645\u5230\u5382\u65f6\u95f4"},p),n["default"].createElement(T,{label:"\u5907\u6ce8"},t("remark")(n["default"].createElement(M,{style:{width:"80%"},autoSize:{minRows:4,maxRows:4}}))))),n["default"].createElement("div",{className:k["default"].footer},n["default"].createElement(u["default"],{onClick:function(){return N["default"].goBack()}},"\u8fd4\u56de"),n["default"].createElement(u["default"],{onClick:this.handleSave.bind(this),type:"primary"},"\u63d0\u4ea4"))))}}]),t}(n.Component),b=I))||b)||b);t["default"]=B}}]);