(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{OSZ5:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a("IzEo");var c=n(a("bx4M"));a("14J3");var r=n(a("BMrR"));a("jCWc");var o=n(a("kPKH"));a("+L6B");var i=n(a("2/Rp"));a("P2fV");var d=n(a("NJEC"));a("Pwec");var s=n(a("CtXQ"));a("miYZ");var u=n(a("tsqr")),f=n(a("2Taf")),p=n(a("vZ4D")),h=n(a("l4Ni")),m=n(a("ujKo")),y=n(a("MhPg"));a("fu2T");var E,g,v,O=n(a("gK9i")),S=l(a("q1tI")),b=a("MuoO"),I=a("LvDl"),k=n(a("3a4m")),T=n(a("4C7b")),B=a("jGFM"),_=n(a("b0CK")),C=O["default"].Panel,L=(E=(0,b.connect)(function(e){var t=e.LogisticsOrderModel,a=e.loading;return{locationOptions:t.locationOptions,contractInfoDTO:t.contractInfoDTO,logisticsBatchDTOS:t.logisticsBatchDTOS,collapseActivityKey:t.collapseActivityKey,transportSectionOBJ:t.transportSectionOBJ,transportSectionOBJOrigin:t.transportSectionOBJOrigin,loading:a.effects["LogisticsOrderModel/getLogisticsBatchInfoEffect"]}}),E((v=function(e){function t(e){var a;return(0,f["default"])(this,t),a=(0,h["default"])(this,(0,m["default"])(t).call(this,e)),a.getLogisticsBatchInfo=function(){var e=a.props.location.query,t=e.contractBusinessId,n=e.businessType,l={contractBusinessId:t,requestType:1===Number(n)?"buyLogisticsBatch":"saleLogisticsBatch"},c=a.props.dispatch;c({type:"LogisticsOrderModel/getLogisticsBatchInfoEffect",payload:l,callback:function(e,t,a){"error"===t&&u["default"].error(a)}})},a.handleCheckDetail=function(e){var t=e.transportSectionId,n=a.props,l=n.contractInfoDTO,c=n.location.query,r=c.businessType;k["default"].push({pathname:"/logisticsManage/order/transportDetail",query:{transportSectionId:t,completed:l.completed,requestType:1===Number(r)?"buyTransportSection":"saleTransportSection"}})},a.handleEditEnable=function(){var e=a.state.isEditing;a.setState({isEditing:!e})},a.handleTableSve=function(e){var t=a.props,n=t.dispatch,l=t.collapseActivityKey,c=t.transportSectionOBJ,r=(0,I.cloneDeep)(c);(0,I.isEqual)(r[l],e)||(r[l]=e,n({type:"LogisticsOrderModel/cacheSectionListEffect",payload:r,callback:function(e,t,a){"error"===t&&u["default"].error(a)}}))},a.handleAddSection=function(e){var t=a.props.dispatch;t({type:"LogisticsOrderModel/addSectionListEffect",payload:{batchId:e},callback:function(e,t,a){"error"===t?u["default"].error(a):u["default"].success(a)}})},a.handleDeleteSection=function(e){var t=a.props.dispatch;t({type:"LogisticsOrderModel/deleteSectionListEffect",payload:e,callback:function(e,t,a){"error"===t?u["default"].error(a):u["default"].success(a)}})},a.handleSaveSectionOk=function(){try{_czc1.push(["_trackEvent","\u7269\u6d41\u8ba2\u5355","\u65b0\u589e\u9636\u6bb5","","",""])}catch(e){}var e=a.props.dispatch;e({type:"LogisticsOrderModel/saveSectionListEffect",payload:{},callback:function(e,t,n){"error"===t?u["default"].error(n):(u["default"].success(n),a.handleSaveSectionCancle())}})},a.handleSaveSectionCancle=function(){a.getLogisticsBatchInfo(),a.handleEditEnable()},a.genExtra=function(){return S["default"].createElement("a",null,S["default"].createElement(s["default"],{type:"edit",style:{fontSize:20,marginRight:20},onClick:function(e){e.stopPropagation(),a.handleEditEnable()}}))},a.handleCollapseChange=function(e){var t=a.props.dispatch;t({type:"LogisticsOrderModel/cacheCollapseActivityKeyEffect",payload:e,callback:function(e,t,a){"error"===t&&u["default"].error(a)}})},a.handleAddBatch=function(){try{_czc1.push(["_trackEvent","\u7269\u6d41\u8ba2\u5355","\u65b0\u589e\u6279\u6b21","","",""])}catch(e){}var e=a.props.dispatch;e({type:"LogisticsOrderModel/addBatchListEffect",payload:{},callback:function(e,t,a){"error"===t?u["default"].error(a):u["default"].success(a)}})},a.renderPanel=function(){var e=a.state.isEditing,t=a.props,n=t.logisticsBatchDTOS,l=t.locationOptions,c=t.transportSectionOBJ,r=t.collapseActivityKey,o=t.contractInfoDTO,u=[{title:"\u9636\u6bb5",dataIndex:"transportSectionName",key:"transportSectionName"},{title:"\u8fd0\u8f93\u65b9\u5f0f",dataIndex:"transportMode",key:"transportMode",editable:!0,selectOptions:B.modeOfTransportOptions,inputType:"select"},{title:"\u8d77\u59cb\u5730",dataIndex:"startingPlaceId",key:"startingPlaceId",editable:!0,selectOptions:l,inputType:"select"},{title:"\u5230\u8fbe\u5730",dataIndex:"arrivalPlaceId",key:"arrivalPlaceId",editable:!0,selectOptions:l,inputType:"select"},{title:"\u662f\u5426\u5230\u5382",dataIndex:"toFactory",key:"toFactory",editable:!0,selectOptions:B.isToFactoryOptions,inputType:"select"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,t){return t.disabled||o.completed?S["default"].createElement("a",{onClick:function(){return a.handleCheckDetail({transportSectionId:t.transportSectionId})}},"\u67e5\u770b\u8be6\u60c5"):S["default"].createElement(d["default"],{title:"\u786e\u8ba4\u5220\u9664\u5417?",onConfirm:function(){return a.handleDeleteSection({collapseActivityKey:r,transportSectionId:t.transportSectionId})},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},S["default"].createElement("a",null,"\u5220\u9664"))}}];return n.map(function(t){var n=t.batchName,l=t.batchId;return S["default"].createElement(C,{header:"\u6279\u6b21:".concat(n),key:l,extra:!o.completed&&a.genExtra()},S["default"].createElement(T["default"],{rowKey:"transportSectionId",dataSource:c[t.batchId],columns:u,handleTableSve:a.handleTableSve,footer:function(){return e&&!o.completed?S["default"].createElement(S["default"].Fragment,null,S["default"].createElement("div",null,S["default"].createElement(i["default"],{type:"dashed",onClick:function(){return a.handleAddSection(t.batchId)},style:{width:"100%",height:40,marginTop:5,marginBottom:10}},S["default"].createElement(s["default"],{type:"plus"})," \u65b0\u589e\u9636\u6bb5")),S["default"].createElement("div",null,S["default"].createElement(i["default"],{type:"primary",onClick:a.handleSaveSectionOk},"\u4fdd\u5b58"),S["default"].createElement(i["default"],{type:"default",onClick:a.handleSaveSectionCancle,style:{display:"inline-block",marginLeft:10}},"\u53d6\u6d88"))):null}}))})},a.state={isEditing:!1},a}return(0,y["default"])(t,e),(0,p["default"])(t,[{key:"componentDidMount",value:function(){this.getLogisticsBatchInfo()}},{key:"render",value:function(){var e=this.props,t=e.collapseActivityKey,a=e.contractInfoDTO;return S["default"].createElement(S["default"].Fragment,null,S["default"].createElement(r["default"],{className:_["default"].header},S["default"].createElement(o["default"],{span:16,className:_["default"].left},S["default"].createElement("h2",null,"\u7269\u6d41\u8ba2\u5355\u8be6\u60c5"),S["default"].createElement(r["default"],{className:_["default"].info},S["default"].createElement(o["default"],{span:10},S["default"].createElement("span",null,"\u5408\u540c\u53f7:"),S["default"].createElement("span",null,a.contractNum)),S["default"].createElement(o["default"],{span:10},S["default"].createElement("span",null,"\u5408\u540c\u7c7b\u578b:"),S["default"].createElement("span",null,1===a.contractBusinessId?"\u91c7\u8d2d\u5408\u540c":"\u9500\u552e\u5408\u540c")),S["default"].createElement(o["default"],{span:10},S["default"].createElement("span",null,"\u7b7e\u8ba2\u65f6\u95f4:"),S["default"].createElement("span",null,a.signDate)),S["default"].createElement(o["default"],{span:10},S["default"].createElement("span",null,"\u4ea7\u54c1\u540d\u79f0:"),S["default"].createElement("span",null,a.productName)),S["default"].createElement(o["default"],{span:10},S["default"].createElement("span",null,"\u5408\u540c\u6570\u91cf:"),S["default"].createElement("span",null,a.quantity)),S["default"].createElement(o["default"],{span:10},S["default"].createElement("span",null,"\u91c7\u8d2d\u65b9\u5f0f:"),S["default"].createElement("span",null,0===a.saleMode?"\u81ea\u63d0":"\u5305\u8fd0"))))),S["default"].createElement(c["default"],{style:{margin:" 24px 32px"},title:"\u7269\u6d41\u60c5\u51b5"},S["default"].createElement(O["default"],{accordion:!0,activeKey:t,onChange:this.handleCollapseChange},this.renderPanel()),!a.completed&&S["default"].createElement(i["default"],{type:"dashed",onClick:this.handleAddBatch,style:{width:"98%",height:40,marginTop:20,marginRight:"1%",marginLeft:"1%"}},S["default"].createElement(s["default"],{type:"plus"})," \u65b0\u589e\u6279\u6b21")))}}]),t}(S.Component),g=v))||g),M=L;t["default"]=M},b0CK:function(e,t,a){e.exports={addBatchStyle:"addBatchStyle___1ezky",header:"header___3VUvg",left:"left___2vkaq",title:"title___2B4H7",info:"info___MVOmq",right:"right___2JD6E"}},jGFM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isToFactoryOptions=t.modeOfTransportOptions=void 0;var n=[{value:"1",label:"\u6c7d\u8f66"},{value:"2",label:"\u8f6e\u8239"},{value:"3",label:"\u706b\u8f66"}];t.modeOfTransportOptions=n;var l=[{value:"0",label:"\u5426"},{value:"1",label:"\u662f"}];t.isToFactoryOptions=l}}]);