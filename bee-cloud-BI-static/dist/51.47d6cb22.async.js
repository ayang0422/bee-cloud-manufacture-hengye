(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[51],{"4Frt":function(e,t,a){"use strict";var r=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=l(a("jehZ")),n=l(a("Y/ft")),c=l(a("p0pE"));a("miYZ");var d=l(a("tsqr")),u=l(a("qIgq"));a("/zsF");var i=l(a("PArb")),s=r(a("q1tI")),m=a("MuoO"),f=l(a("wd/R")),p=l(a("wY1l")),I=a("M7Dx"),g=a("qVZr"),b=l(a("mToO")),O=(0,f["default"])().subtract(30,"days").format("YYYY-MM-DD"),S=(0,f["default"])().format("YYYY-MM-DD"),E=function(e){var t=e.form.getFieldDecorator,a=e.isOutStock,r={};return s["default"].createElement(s["default"].Fragment,null,s["default"].createElement(I.FormItemInputSearch,{getFieldDecorator:t,label:"",fieldId:"contractId",required:!1,formItemLayout:r,inputProps:{placeholder:"\u6309\u5408\u540c\u53f7\u67e5\u8be2"}}),s["default"].createElement(I.FormItemInputSearch,{getFieldDecorator:t,label:"",fieldId:"customerName",required:!1,formItemLayout:r,inputProps:{placeholder:"\u6309\u5ba2\u6237\u540d\u79f0\u67e5\u8be2"}}),a?s["default"].createElement(I.FormItemRangePicker,{getFieldDecorator:t,label:"\u51fa\u5e93\u65e5\u671f",fieldId:"dateRange",required:!1,datePickerProps:{format:"YYYY-MM-DD"},formItemLayout:r}):null)},y=function(e){var t=e.form.getFieldDecorator,a=e.storageOptions,r=e.productsOptions,l=e.productSpecOptions,o={labelCol:{span:4},wrapperCol:{span:16}};return s["default"].createElement(s["default"].Fragment,null,s["default"].createElement(I.FormItemSelect,{getFieldDecorator:t,label:"\u4ea7\u54c1",fieldId:"productId",required:!0,selectProps:{options:r},formItemLayout:o}),s["default"].createElement(I.FormItemSelect,{getFieldDecorator:t,label:"\u89c4\u683c",fieldId:"productSpecId",required:!0,selectProps:{options:l},formItemLayout:o}),s["default"].createElement(I.FormItemSelect,{getFieldDecorator:t,label:"\u4ed3\u5e93",fieldId:"storageId",required:!0,selectProps:{options:a},formItemLayout:o}),s["default"].createElement(I.FormItemInput,{getFieldDecorator:t,label:"\u9886\u7528\u6570\u91cf",fieldId:"productNumber",required:!0,formItemLayout:o}),s["default"].createElement(I.FormItemInput,{getFieldDecorator:t,label:"\u9886\u7528\u4eba",fieldId:"receiver",required:!0,formItemLayout:o}))},v=(0,I.CustomFormHOC)(y),F=(0,I.CustomModalHOC)(v),h=function(e){var t=e.detailDataWithAdd;return s["default"].createElement("div",null,t.map(function(e){return s["default"].createElement("div",null,s["default"].createElement("div",{style:{marginLeft:"40%"}},s["default"].createElement("p",null,s["default"].createElement("span",{className:b["default"].label}," \u4ea7\u54c1\u540d\u79f0:"),e.productName),s["default"].createElement("p",null,s["default"].createElement("span",{className:b["default"].label}," \u4ea7\u54c1\u89c4\u683c:"),e.productSpecName),s["default"].createElement("p",null,s["default"].createElement("span",{className:b["default"].label}," \u4ed3\u5e93:"),e.storageName),s["default"].createElement("p",null,s["default"].createElement("span",{className:b["default"].label}," \u51fa\u5e93\u6570\u91cf:"),e.productNumber),s["default"].createElement("p",null,s["default"].createElement("span",{className:b["default"].label}," \u51fa\u5e93\u65f6\u95f4:"),e.receiveTime)),s["default"].createElement(i["default"],null))}))},T=(0,I.CustomModalHOC)(h),k=function(e){var t=e.dispatch,a=e.storageOptions,r=e.productsOptions,l=e.productSpecOptions,i=e.saveFreeStorageParams,m=e.detailDataWithAdd,b=(0,s.useState)("descend"),y=(0,u["default"])(b,2),v=y[0],h=y[1],k=(0,s.useState)("1"),D=(0,u["default"])(k,2),P=D[0],C=D[1],N=(0,s.useState)(!1),M=(0,u["default"])(N,2),Y=M[0],q=M[1],x=(0,s.useState)(!1),w=(0,u["default"])(x,2),L=w[0],A=w[1];(0,s.useEffect)(function(){t({type:"salesOutStockModel/fetchInitOptionsEffect",payload:{},callback:function(e,t,a){"error"===t&&d["default"].error(a)}})},[]);var R=[],W=[{title:"\u51fa\u5e93\u6570\u91cf",dataIndex:"number"},{title:"\u51fa\u5e93\u65e5\u671f",dataIndex:"modifyTime",sortOrder:v,sorter:function(e,t){if(e.modifyTime&&t.modifyTime){var a=e.modifyTime.slice(0,4),r=e.modifyTime.slice(5,7),l=e.modifyTime.slice(8,10),o="".concat(a,"-").concat(r,"-").concat(l),n=t.modifyTime.slice(0,4),c=t.modifyTime.slice(5,7),d=t.modifyTime.slice(8,10),u="".concat(n,"-").concat(c,"-").concat(d),i=(0,f["default"])(o).isBefore(u);return i}return!1}}],H=[{title:"\u5bf9\u5e94\u5408\u540c\u53f7",dataIndex:"contractId"},{title:"\u5ba2\u6237",dataIndex:"customerName"},{title:"\u627f\u8fd0\u5546",dataIndex:"carrierName"},{title:"\u8f66\u724c\u53f7",dataIndex:"licensePlateNumber"},{title:"\u53f8\u673a",dataIndex:"driverName"},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"contact"},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,t){return s["default"].createElement(p["default"],{to:{pathname:"/inventoryManage/salesOutStock/detail",query:{id:t.id,isOutStock:"2"===P}}},"\u67e5\u770b\u8be6\u60c5")}}];"1"===P?H.splice.apply(H,[3,0].concat(R)):H.splice.apply(H,[3,0].concat(W));var _=function(e,t,a){v!==a.order&&h(a.order)},z=[{value:"1",label:"\u5f85\u51fa\u5e93"},{value:"2",label:"\u5df2\u51fa\u5e93"}],K={parentTabs:z,searchFormProps:{isOutStock:"2"===P},searchParams:{currentPage:1,orderStage:"",pageSize:10,searchCount:!0,contractId:"",customerName:"",dateRange:{startTime:O,endTime:S}},dispatch:t,handleTableChange:_,onTabChange:function(e){return C(e)}},Z="id",j=(0,c["default"])({},K,{tableProps:{columns:H,rowKey:Z},operateText:"\u67e5\u770b\u5df2\u65b0\u589e\u51fa\u5e93\u4fe1\u606f",onOperateClick:function(){t({type:"salesOutStockModel/getFreeStorageEffect",payload:{},callback:function(e,t,a){"error"===t?d["default"].error(a):A(!0)}})},listService:g.searchSaleOutOfStockList}),J=(0,c["default"])({},K,{tableProps:{columns:H,rowKey:Z},operateText:"\u65b0\u589e\u51fa\u5e93",onOperateClick:function(){return q(!0)},listService:g.selectUnLoadContractCar}),B=function(e){t({type:"salesOutStockModel/cacheSaveFreeStorageEffect",payload:e,callback:function(e,t,a){"error"===t&&d["default"].error(a)}})},U={visible:Y,onOk:function(){try{_czc1.push(["_trackEvent","\u9500\u552e\u51fa\u5e93","\u65b0\u589e","","",""])}catch(e){}t({type:"salesOutStockModel/saveFreeStorageEffect",payload:{},callback:function(e,t,a){"error"===t?d["default"].error(a):(d["default"].success(a),q(!1))}})},onCancel:function(){return q(!1)},title:"\u786e\u8ba4\u51fa\u5e93",ComProps:{storageOptions:a,productsOptions:r,productSpecOptions:l,dataDetail:i,onChange:function(e){return B(e)}}},V="1"===P?(0,c["default"])({},J):(0,c["default"])({},j),X=function(e){var t=e.dateRange,a=e.contractId,r=e.customerName,l=(0,n["default"])(e,["dateRange","contractId","customerName"]),o={startTime:t.startTime,endTime:t.endTime,contractId:a,customerName:r,page:(0,c["default"])({},l)};return o},G={visible:L,onOk:function(){return A(!1)},onCancel:function(){return A(!1)},title:"\u65b0\u589e\u51fa\u5e93\u7684\u8be6\u60c5",ComProps:{detailDataWithAdd:m}};return s["default"].createElement(s["default"].Fragment,null,s["default"].createElement(I.TableWrapper,(0,o["default"])({},V,{currentTabKey:P,paramsHandler:X}),s["default"].createElement(E,null)),s["default"].createElement(F,U),s["default"].createElement(T,G))},D=(0,m.connect)(function(e){var t=e.salesOutStockModel,a=t.storageOptions,r=t.productsOptions,l=t.productSpecOptions,o=t.saveFreeStorageParams,n=t.detailDataWithAdd;return{storageOptions:a,productsOptions:r,productSpecOptions:l,saveFreeStorageParams:o,detailDataWithAdd:n}})(k);t["default"]=D}}]);