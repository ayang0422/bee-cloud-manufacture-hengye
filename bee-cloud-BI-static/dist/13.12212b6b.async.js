(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{a1m7:function(e,t,a){"use strict";var r=a("tAuX"),c=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var n=c(a("d6i3")),u=c(a("p0pE")),d=c(a("wd/R")),o=c(a("do7d")),s=r(a("at5y")),l=a("3eXy"),i=a("YYOS"),f={orderInfo:{},tableDatas:{PRODUCT:[],RECEIVE:{},PAY:[],SALE_RECEIVE:[]},parentTabs:[],productsOptions:[],listSearchParams:{currentPage:1,orderStage:"",pageSize:10,productId:"",searchCount:!0,dateRange:{startTime:(0,d["default"])().subtract(30,"days").format("YYYY-MM-DD"),endTime:(0,d["default"])().format("YYYY-MM-DD")},contractNum:""},dataObj:{}},p={namespace:"sale",state:(0,u["default"])({},f),effects:{getSaleContractDetail:n["default"].mark(function e(t,a){var r,c,u,d,l;return n["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,c=t.callback,u=a.call,d=a.put,e.next=4,u(i.getSaleContractDetail,r);case 4:if(l=e.sent,1!==l.code||!l.object){e.next=12;break}return e.next=8,d({type:"setOrderInfo",data:l.object});case 8:return e.next=10,d({type:"setTableData",key:o["default"].PRODUCT.key,data:s.productData(l.object.contract||{})});case 10:return e.next=12,d({type:"setTableData",key:o["default"].PAY.key,data:l.object.receive&&l.object.receive.data?l.object.receive.data:[]});case 12:c&&c();case 13:case"end":return e.stop()}},e)}),getCarList:n["default"].mark(function e(t,a){var r,c,u,d,s;return n["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,c=t.callback,u=a.call,d=a.put,e.next=4,u(i.getCarList,r);case 4:if(s=e.sent,1!==s.code||!s.object){e.next=8;break}return e.next=8,d({type:"setTableData",key:o["default"].SALE_RECEIVE.key,data:{data:s.object,page:s.page}});case 8:c&&c();case 9:case"end":return e.stop()}},e)}),getListEffect:n["default"].mark(function e(t,a){var r,c,d,o,s,i,f,p,b,y,m,v,g;return n["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,c=t.callback,d=a.call,o=a.put,e.next=4,d(l.saleContractBasic,r);case 4:if(s=e.sent,!s||1!==s.code){e.next=13;break}return i=s.page,f=i.currentPage,p=i.pageSize,b=i.totalRecords,y=s.object,m=y.data.map(function(e){return(0,u["default"])({key:e.contractBusinessId},e)}),v={list:m,count:y.count,pagination:{total:b,current:f,pageSize:p}},e.next=11,o({type:"getListReduce",payload:{listSearchParams:(0,u["default"])({},r),dataObj:v}});case 11:e.next=14;break;case 13:c&&(g=s&&s.message||"fetchInit-error",c("","error",g));case 14:case"end":return e.stop()}},e)}),getProductsEffect:n["default"].mark(function e(t,a){var r,c,u,d,o,s;return n["default"].wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.callback,c=a.call,u=a.put,e.next=4,c(l.getProducts);case 4:if(d=e.sent,!d||1!==d.code){e.next=13;break}return o=d.object.map(function(e){return{value:"".concat(e.productId),label:e.productName}}),o.unshift({value:"",label:"\u5168\u90e8"}),e.next=10,u({type:"getProductsReduce",payload:o});case 10:r(o,"ok"),e.next=14;break;case 13:r&&(s=d&&d.message||"fetchInit-error",r("","error",s));case 14:case"end":return e.stop()}},e)})},reducers:{setTableData:function(e,t){var a=t.data,r=t.key,c=(0,u["default"])({},e.tableDatas);return c[r]=a,(0,u["default"])({},e,{tableDatas:c})},setOrderInfo:function(e,t){var a=t.data;return(0,u["default"])({},e,{orderInfo:a})},cacheSearchParamsReduce:function(e,t){var a=t.payload;return(0,u["default"])({},e,{listSearchParams:(0,u["default"])({},e.listSearchParams,a)})},cacheDataListReduce:function(e,t){var a=t.payload;return(0,u["default"])({},e,{dataObj:a})},getListReduce:function(e,t){var a=t.payload,r=a.listSearchParams,c=a.dataObj;return(0,u["default"])({},e,{listSearchParams:r,dataObj:c})},getProductsReduce:function(e,t){var a=t.payload;return(0,u["default"])({},e,{productsOptions:a})}}};t["default"]=p},at5y:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.productData=void 0;var r=function(e){return[{productName:e.productName,qualityRequirement:e.qualityRequirement,unitPrice:e.unitPrice,quantity:e.quantity,amount:e.amount}]};t.productData=r}}]);