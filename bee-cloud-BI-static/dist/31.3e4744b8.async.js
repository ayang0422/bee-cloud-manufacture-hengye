(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"QJ/B":function(e,t,a){e.exports={stepsContent:"stepsContent___Pu-TS",stepsAction:"stepsAction___2NHXY"}},njM2:function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=t.Step2=t.Step1=void 0,a("IzEo");var r=l(a("bx4M"));a("14J3");var u=l(a("BMrR"));a("jCWc");var d=l(a("kPKH"));a("miYZ");var o=l(a("tsqr")),c=l(a("eHn4")),f=l(a("qIgq"));a("giR+");var i=l(a("fyUT"));a("nRaC");var s=l(a("5RzL"));a("y8nQ");var p=l(a("Vl3Y")),v=l(a("jehZ"));a("7Kak");var y=l(a("9yH6")),m=l(a("p0pE")),h=l(a("2Taf")),I=l(a("vZ4D")),g=l(a("l4Ni")),C=l(a("ujKo")),E=l(a("MhPg"));a("5NDa");var b=l(a("5rEg")),k=n(a("q1tI")),D=a("M7Dx"),M=b["default"].TextArea,N=function(e){function t(){var e,a;(0,h["default"])(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,g["default"])(this,(e=(0,C["default"])(t)).call.apply(e,[this].concat(l))),a.onChange=function(e,t){var n=(0,m["default"])({},a.props.datas),l=a.props.dispatch;switch(n[e]=t,e){case"inventoryTypeCode":l({type:"InventoryModel/getinventoryTypeDescService",payload:{inventoryTypeCode:t},callback:function(e){n.categoryId=e,l({type:"InventoryModel/step1DataChange",payload:(0,m["default"])({},n)})}});break;default:l({type:"InventoryModel/step1DataChange",payload:(0,m["default"])({},n)});break}},a}return(0,E["default"])(t,e),(0,I["default"])(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"InventoryModel/getInventoryType",payload:{},callback:function(t){e({type:"InventoryModel/step1DataChange",payload:(0,m["default"])({},t)})}})}},{key:"render",value:function(){var e=this,t=this.props.datas,a=t.inventoryTypeCode,n=t.categoryId,l=this.props,r=l.typeDesc,u=void 0===r?[]:r,d=l.types,o=void 0===d?[]:d,c={labelCol:{span:2},wrapperCol:{span:6}},f={options:o,value:a,onChange:function(t){return e.onChange("inventoryTypeCode",t.target.value)}},i={treeData:u,value:n,onChange:function(t){return e.onChange("categoryId",t)},treeCheckable:!0,treeDefaultExpandAll:!0,searchPlaceholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}};return k["default"].createElement(p["default"],null,k["default"].createElement(p["default"].Item,(0,v["default"])({},c,{label:"\u76d8\u70b9\u7c7b\u578b"}),k["default"].createElement(y["default"].Group,f)),k["default"].createElement(p["default"].Item,(0,v["default"])({},c,{label:"\u76d8\u70b9\u7c7b\u578b"}),k["default"].createElement(s["default"],i)))}}]),t}(k.PureComponent);t.Step1=N;var x=function(e){var t=e.productName,a=e.accountNum,n=e.differenceNum,l=e.valueChange,r=e.actualNum,u={labelCol:{span:4},wrapperCol:{span:16}};return k["default"].createElement(k["default"].Fragment,null,k["default"].createElement(p["default"].Item,(0,v["default"])({label:"\u4ea7\u54c1\u540d\u79f0"},u),t),k["default"].createElement(p["default"].Item,(0,v["default"])({label:"\u8d26\u9762\u6570\u91cf"},u),a,"\u5428"),k["default"].createElement(p["default"].Item,(0,v["default"])({label:"\u5dee\u5f02\u6570\u91cf"},u),n,"\u5428"),k["default"].createElement(p["default"].Item,(0,v["default"])({label:"\u5b9e\u9645\u6570\u91cf"},u,{required:!0}),k["default"].createElement(i["default"],{value:r,onChange:function(e){return l(e)},min:0})))},S=(0,D.CustomModalHOC)(x),T=function(e){var t=(0,k.useState)(e.actualNum),a=(0,f["default"])(t,2),n=(a[0],a[1],e.datas),l=e.datas,i=l.list,s=void 0===i?[]:i,y=l.remarks,h=l.inventoryOrderId,I=e.dispatch,g={labelCol:{span:4},wrapperCol:{span:12}},C=function(e,t){var a=(0,m["default"])({},n,(0,c["default"])({},e,t));I({type:"InventoryModel/step2DataChange",payload:(0,m["default"])({},a)})},E=function(e){var t=(0,m["default"])({},P),a=t.index,n=t.data,l=void 0===n?{}:n;l.actualNum=e,j({data:l,index:a})},N=(0,k.useState)(!1),x=(0,f["default"])(N,2),T=x[0],w=x[1],_=(0,k.useState)({}),O=(0,f["default"])(_,2),P=O[0],j=O[1],A=[{title:"\u4ea7\u54c1\u540d",dataIndex:"productName"},{title:"\u89c4\u683c",dataIndex:"productSpecName"},{title:"\u4ed3\u5e93",dataIndex:"storageName"},{title:"\u8ba1\u91cf\u5355\u4f4d",dataIndex:"productUnit"},{title:"\u8d26\u9762\u6570\u91cf",dataIndex:"accountNum"},{title:"\u5b9e\u76d8\u6570\u91cf",dataIndex:"actualNum"},{title:"\u5dee\u5f02\u6570\u91cf",dataIndex:"differenceNum"},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,t,a){return k["default"].createElement("a",{onClick:function(){w(!0),j({data:(0,m["default"])({},t),index:a})}},"\u8c03\u6574")}}],q={loading:!1,columns:A,data:{list:s}},R={visible:T,onOk:function(e){var t=P.data,a=P.index;if(!t.actualNum||t.actualNum<0)return o["default"].error("\u5b9e\u9645\u6570\u5e94\u8be5\u5927\u4e8e0");var l=(0,m["default"])({},n),r=l.list[a];l.list[a]=(0,m["default"])({},t,{differenceNum:Number((r.accountNum-t.actualNum).toFixed(4))}),I({type:"InventoryModel/step2DataChange",payload:(0,m["default"])({},l)}),w(!1)},onCancel:function(){return w(!1)},title:"\u76d8\u70b9\u8c03\u6574",ComProps:(0,m["default"])({},P.data,{valueChange:E})},H={disabled:!0,value:h},J={value:y,onChange:function(e){return C("remarks",e.target.value)}};return k["default"].createElement("div",{style:{marginLeft:32,marginRight:32}},k["default"].createElement(r["default"],null,k["default"].createElement(u["default"],null,k["default"].createElement(d["default"],{span:13},k["default"].createElement(p["default"].Item,(0,v["default"])({},g,{label:"\u76d8\u70b9\u5355\u5355\u53f7"}),k["default"].createElement(b["default"],H))),k["default"].createElement(d["default"],{span:13},k["default"].createElement(p["default"].Item,(0,v["default"])({},g,{label:"\u5907\u6ce8"}),k["default"].createElement(M,J))))),k["default"].createElement(r["default"],{style:{marginTop:10}},k["default"].createElement(D.StandardTable,q),k["default"].createElement(S,R)))};t.Step2=T;var w=T;t["default"]=w},tIMg:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a("IzEo");var r=n(a("bx4M"));a("+L6B");var u=n(a("2/Rp"));a("miYZ");var d,o,c=n(a("tsqr")),f=n(a("p0pE")),i=n(a("2Taf")),s=n(a("vZ4D")),p=n(a("l4Ni")),v=n(a("ujKo")),y=n(a("MhPg")),m=l(a("q1tI")),h=a("MuoO"),I=n(a("3a4m")),g=a("njM2"),C=n(a("QJ/B")),E=(d=(0,h.connect)(function(e){var t=e.InventoryModel,a=t.typeDesc,n=t.types,l=t.step1Data,r=t.step2Data;return{typeDesc:a,step1Data:l,types:n,step2Data:r}}),d(o=function(e){function t(e){var a;return(0,i["default"])(this,t),a=(0,p["default"])(this,(0,v["default"])(t).call(this,e)),a.state={current:0},a}return(0,y["default"])(t,e),(0,s["default"])(t,[{key:"createInventoryOrder",value:function(){var e=this,t=this.props,a=t.step1Data,n=t.dispatch;n({type:"InventoryModel/createInventoryOrder",payload:(0,f["default"])({},a),callback:function(){return e.next()}})}},{key:"saveInventoryInfo",value:function(){try{_czc1.push(["_trackEvent","\u76d8\u70b9\u5355","\u65b0\u589e","","",""])}catch(e){}var e=this.props,t=e.step2Data,a=e.dispatch;a({type:"InventoryModel/saveInventoryInfo",payload:(0,f["default"])({},t),callback:function(e){1===e.code?c["default"].success(e.message,1,function(){I["default"].push("/inventoryManage/inventory")}):c["default"].error(e.message)}})}},{key:"next",value:function(){var e=this.state.current+1;this.setState({current:e})}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"render",value:function(){var e=this,t=this.state.current,a=this.props,n=a.typeDesc,l=a.types,d=a.step1Data,o=a.step2Data,c=a.dispatch,f=[{title:"First",content:m["default"].createElement(g.Step1,{datas:d,types:l,typeDesc:n,dispatch:c})},{title:"Second",content:m["default"].createElement(g.Step2,{datas:o,dispatch:c})}];return m["default"].createElement(r["default"],null,m["default"].createElement("div",{className:C["default"].stepsContent},f[t].content),m["default"].createElement("div",{className:C["default"].stepsAction},t<f.length-1&&m["default"].createElement(u["default"],{type:"primary",onClick:this.createInventoryOrder.bind(this)},"\u4e0b\u4e00\u6b65"),t>0&&m["default"].createElement(u["default"],{style:{marginLeft:8},onClick:function(){return e.prev()}},"\u4e0a\u4e00\u6b65"),t===f.length-1&&m["default"].createElement(u["default"],{type:"primary",onClick:this.saveInventoryInfo.bind(this)},"\u4fdd\u5b58")))}}]),t}(m.Component))||o),b=E;t["default"]=b}}]);